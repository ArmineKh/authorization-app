import React from 'react'

import { Link, NavLink, useNavigate } from "react-router-dom";
import Dropdown from 'react-bootstrap/Dropdown';

import { useSelector, useDispatch } from 'react-redux'
import { removeUser, removeUserToken } from '../../redux/slices/userSlice'

import adminImg from '../../assets/img/chat2.png'
import "./Header.scss"


const Header = () => {
  const navigate = useNavigate();
  const currentUser = useSelector((state) => state.userReducer.user)
  const dispatch = useDispatch()

  const handleLogout = (e) => {
    e.preventDefault()
    try {
      localStorage.removeItem('userToken')
      dispatch(removeUser())
      dispatch(removeUserToken())
      navigate("/login")
    } catch (error) {
      console.log(error)
    }
  }

  return (
    <div className="d-flex flex-row justify-content-between align-items-center">
      <form className="header-search d-sm-down-none form-inline">
        <div className="mb-3">
          <div className="input-group-no-border input-group">
            <div className="input-group-prepend-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M14.3851 15.4457C11.7348 17.5684 7.85537 17.4013 5.39858 14.9445C2.76254 12.3085 2.76254 8.03464 5.39858 5.3986C8.03462 2.76256 12.3085 2.76256 14.9445 5.3986C17.4013 7.85538 17.5684 11.7348 15.4457 14.3851L20.6014 19.5407C20.8943 19.8336 20.8943 20.3085 20.6014 20.6014C20.3085 20.8943 19.8336 20.8943 19.5407 20.6014L14.3851 15.4457ZM6.45924 13.8839C4.40899 11.8336 4.40899 8.50951 6.45924 6.45926C8.5095 4.40901 11.8336 4.40901 13.8839 6.45926C15.9326 8.50801 15.9341 11.8287 13.8884 13.8794C13.8869 13.8809 13.8854 13.8823 13.8838 13.8839C13.8823 13.8854 13.8808 13.8869 13.8794 13.8884C11.8287 15.9341 8.50799 15.9326 6.45924 13.8839Z"></path>
              </svg>
            </div>
            <input id="search-input" placeholder="Search Dashboard" type="text" className="form-control" />
          </div>
        </div>
      </form>

      <nav className='nav navigation-nav'>
        <ul className='d-flex justify-items-between align-items-center'>
          <li className='nav-item'>
            <NavLink
              to="/"
            >
              To the main
            </NavLink>
          </li>
          <li className='nav-item'>
            <NavLink
              to="/news"
            >
              News 
            </NavLink>
          </li>
          <li className='nav-item'>
            <NavLink
              to="/profile"
            >
              Profile 
            </NavLink>
          </li>
        </ul>
      </nav>
      <div className='header-right'>
        <ul className="ms-auto nav">
          <li className="dropdown nav-item">
            <span className=" nav-link">
              <span className="float-start me-3">
                <img className='admin-img' src={adminImg} alt="..." title="Admin" />
              </span>
              <Link to="/profile" className="small m-2 d-sm-down-none admin-title">{currentUser? currentUser.login: 'Admin'}</Link>
              <span className="m-1 admin-circle">13</span>
              <i className="arrow-down las la-angle-down"></i>
            </span>
            <Dropdown>
              <Dropdown.Toggle id="dropdown-setting-icon" className='setting-icon'>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="rgb(89, 141, 199)" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M12 3.0792L9.7872 5.3687C9.55167 5.61239 9.22729 5.75 8.88839 5.75H5.75V8.88839C5.75 9.2273 5.61239 9.55167 5.3687 9.7872L3.0792 12L5.3687 14.2128C5.61239 14.4483 5.75 14.7727 5.75 15.1116V18.25H8.88839C9.22729 18.25 9.55167 18.3876 9.7872 18.6313L12 20.9208L14.2128 18.6313C14.4483 18.3876 14.7727 18.25 15.1116 18.25H18.25V15.1116C18.25 14.7727 18.3876 14.4483 18.6313 14.2128L20.9208 12L18.6313 9.78721C18.3876 9.55168 18.25 9.2273 18.25 8.8884V5.75H15.1116C14.7727 5.75 14.4483 5.61239 14.2128 5.3687L12 3.0792ZM11.1012 1.85077C11.5926 1.34237 12.4074 1.34237 12.8988 1.85077L15.2177 4.25H18.5C19.1904 4.25 19.75 4.80965 19.75 5.5V8.78234L22.1492 11.1012C22.6576 11.5926 22.6576 12.4074 22.1492 12.8988L19.75 15.2177V18.5C19.75 19.1904 19.1904 19.75 18.5 19.75H15.2177L12.8988 22.1492C12.4074 22.6576 11.5926 22.6576 11.1012 22.1492L8.78233 19.75H5.5C4.80964 19.75 4.25 19.1904 4.25 18.5V15.2177L1.85077 12.8988C1.34237 12.4074 1.34236 11.5926 1.85077 11.1012L4.25 8.78233V5.5C4.25 4.80964 4.80964 4.25 5.5 4.25H8.78233L11.1012 1.85077Z"></path>
                <path fillRule="evenodd" clipRule="evenodd" d="M7.25 12C7.25 9.37665 9.37665 7.25 12 7.25C14.6234 7.25 16.75 9.37665 16.75 12C16.75 14.6234 14.6234 16.75 12 16.75C9.37665 16.75 7.25 14.6234 7.25 12ZM12 8.75C10.2051 8.75 8.75 10.2051 8.75 12C8.75 13.7949 10.2051 15.25 12 15.25C13.7949 15.25 15.25 13.7949 15.25 12C15.25 10.2051 13.7949 8.75 12 8.75Z"></path>
              </svg>
              </Dropdown.Toggle>

              <Dropdown.Menu>
                <Dropdown.Item eventKey="1" href="/profile">
                  <span className='dropdown-item-content'>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fillRule="evenodd" clipRule="evenodd" d="M7.75 7.5C7.75 5.15279 9.65279 3.25 12 3.25C14.3472 3.25 16.25 5.15279 16.25 7.5C16.25 9.84721 14.3472 11.75 12 11.75C9.65279 11.75 7.75 9.84721 7.75 7.5ZM12 4.75C10.4812 4.75 9.25 5.98122 9.25 7.5C9.25 9.01878 10.4812 10.25 12 10.25C13.5188 10.25 14.75 9.01878 14.75 7.5C14.75 5.98122 13.5188 4.75 12 4.75Z" fill="black"></path>
                      <path fillRule="evenodd" clipRule="evenodd" d="M8 14.75C6.75736 14.75 5.75 15.7574 5.75 17V18.1883C5.75 18.2064 5.76311 18.2218 5.78097 18.2247C9.89972 18.8972 14.1003 18.8972 18.219 18.2247C18.2369 18.2218 18.25 18.2064 18.25 18.1883V17C18.25 15.7574 17.2426 14.75 16 14.75H15.6591C15.6328 14.75 15.6066 14.7542 15.5815 14.7623L14.716 15.045C12.9512 15.6212 11.0488 15.6212 9.28398 15.045L8.41847 14.7623C8.39342 14.7542 8.36722 14.75 8.34087 14.75H8ZM4.25 17C4.25 14.9289 5.92893 13.25 8 13.25H8.34087C8.52536 13.25 8.70869 13.2792 8.88407 13.3364L9.74959 13.6191C11.2119 14.0965 12.7881 14.0965 14.2504 13.6191L15.1159 13.3364C15.2913 13.2792 15.4746 13.25 15.6591 13.25H16C18.0711 13.25 19.75 14.9289 19.75 17V18.1883C19.75 18.9415 19.2041 19.5837 18.4607 19.7051C14.1819 20.4037 9.8181 20.4037 5.53927 19.7051C4.79588 19.5837 4.25 18.9415 4.25 18.1883V17Z" fill="black"></path>
                    </svg>
                    My Account
                  </span>
                </Dropdown.Item>
                <Dropdown.Divider />
                <Dropdown.Item eventKey="2">
                  <span className='dropdown-item-content'>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fillRule="evenodd" clipRule="evenodd" d="M5.83333 13.3333C5.83333 12.875 6.20833 12.5 6.66667 12.5C7.125 12.5 7.5 12.875 7.5 13.3333C7.5 13.7917 7.125 14.1667 6.66667 14.1667C6.20833 14.1667 5.83333 13.7917 5.83333 13.3333ZM10 12.5H13.3333C13.7917 12.5 14.1667 12.875 14.1667 13.3333C14.1667 13.7917 13.7917 14.1667 13.3333 14.1667H10C9.54167 14.1667 9.16667 13.7917 9.16667 13.3333C9.16667 12.875 9.54167 12.5 10 12.5ZM15 16.6667H5C4.54083 16.6667 4.16667 16.2925 4.16667 15.8333V10.8333H15.8333V15.8333C15.8333 16.2925 15.4592 16.6667 15 16.6667ZM5 4.99999H5.83333V5.83332C5.83333 6.29166 6.20833 6.66666 6.66667 6.66666C7.125 6.66666 7.5 6.29166 7.5 5.83332V4.99999H12.5V5.83332C12.5 6.29166 12.875 6.66666 13.3333 6.66666C13.7917 6.66666 14.1667 6.29166 14.1667 5.83332V4.99999H15C15.4592 4.99999 15.8333 5.37416 15.8333 5.83332V9.16666H4.16667V5.83332C4.16667 5.37416 4.54083 4.99999 5 4.99999ZM15 3.33332H14.1667V2.49999C14.1667 2.04166 13.7917 1.66666 13.3333 1.66666C12.875 1.66666 12.5 2.04166 12.5 2.49999V3.33332H7.5V2.49999C7.5 2.04166 7.125 1.66666 6.66667 1.66666C6.20833 1.66666 5.83333 2.04166 5.83333 2.49999V3.33332H5C3.62167 3.33332 2.5 4.45499 2.5 5.83332V15.8333C2.5 17.2117 3.62167 18.3333 5 18.3333H15C16.3783 18.3333 17.5 17.2117 17.5 15.8333V5.83332C17.5 4.45499 16.3783 3.33332 15 3.33332Z" fill="black"></path>
                      <mask id="mask124"  maskUnits="userSpaceOnUse" x="2" y="1" width="16" height="18">
                        <path fillRule="evenodd" clipRule="evenodd" d="M5.83333 13.3333C5.83333 12.875 6.20833 12.5 6.66667 12.5C7.125 12.5 7.5 12.875 7.5 13.3333C7.5 13.7917 7.125 14.1667 6.66667 14.1667C6.20833 14.1667 5.83333 13.7917 5.83333 13.3333ZM10 12.5H13.3333C13.7917 12.5 14.1667 12.875 14.1667 13.3333C14.1667 13.7917 13.7917 14.1667 13.3333 14.1667H10C9.54167 14.1667 9.16667 13.7917 9.16667 13.3333C9.16667 12.875 9.54167 12.5 10 12.5ZM15 16.6667H5C4.54083 16.6667 4.16667 16.2925 4.16667 15.8333V10.8333H15.8333V15.8333C15.8333 16.2925 15.4592 16.6667 15 16.6667ZM5 4.99999H5.83333V5.83332C5.83333 6.29166 6.20833 6.66666 6.66667 6.66666C7.125 6.66666 7.5 6.29166 7.5 5.83332V4.99999H12.5V5.83332C12.5 6.29166 12.875 6.66666 13.3333 6.66666C13.7917 6.66666 14.1667 6.29166 14.1667 5.83332V4.99999H15C15.4592 4.99999 15.8333 5.37416 15.8333 5.83332V9.16666H4.16667V5.83332C4.16667 5.37416 4.54083 4.99999 5 4.99999ZM15 3.33332H14.1667V2.49999C14.1667 2.04166 13.7917 1.66666 13.3333 1.66666C12.875 1.66666 12.5 2.04166 12.5 2.49999V3.33332H7.5V2.49999C7.5 2.04166 7.125 1.66666 6.66667 1.66666C6.20833 1.66666 5.83333 2.04166 5.83333 2.49999V3.33332H5C3.62167 3.33332 2.5 4.45499 2.5 5.83332V15.8333C2.5 17.2117 3.62167 18.3333 5 18.3333H15C16.3783 18.3333 17.5 17.2117 17.5 15.8333V5.83332C17.5 4.45499 16.3783 3.33332 15 3.33332Z" fill="black"></path>
                      </mask>
                      <g mask="url(#mask124)">
                        <rect width="20" height="20" fill="black"></rect>
                      </g>
                    </svg>
                      Calendar
                  </span>
                </Dropdown.Item>
                <Dropdown.Item eventKey="3">
                  <span className='dropdown-item-content'>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fillRule="evenodd" clipRule="evenodd" d="M2.80369 8.3533C2.52355 10.9562 2.53604 13.9582 2.92586 16.5505C3.14156 17.9849 4.31223 19.0845 5.7573 19.2102L7.26753 19.3414C10.4166 19.6152 13.5834 19.6152 16.7325 19.3414L18.2427 19.2102C19.6878 19.0845 20.8585 17.9849 21.0742 16.5505C21.464 13.9582 21.4765 10.9564 21.1963 8.35345C21.1601 8.05169 21.1194 7.75034 21.0742 7.44949C20.8585 6.0151 19.6878 4.91545 18.2427 4.78983L16.7325 4.65855C13.5834 4.38481 10.4166 4.38481 7.26753 4.65855L5.7573 4.78983C4.31223 4.91545 3.14156 6.0151 2.92586 7.44949C2.88063 7.75028 2.83991 8.05159 2.80369 8.3533ZM7.39743 6.15292C10.46 5.88669 13.54 5.88669 16.6026 6.15292L18.1128 6.2842C18.8671 6.34977 19.4782 6.92379 19.5908 7.67254C19.6025 7.7503 19.6139 7.82809 19.625 7.90592L14.064 10.9954C12.7804 11.7085 11.2196 11.7085 9.93599 10.9954L4.37505 7.90596C4.38611 7.82812 4.39749 7.75031 4.40918 7.67254C4.52178 6.92379 5.13287 6.34977 5.8872 6.2842L7.39743 6.15292ZM19.8085 9.51989C20.0025 11.7876 19.9299 14.0725 19.5908 16.3274C19.4782 17.0762 18.8671 17.6502 18.1128 17.7158L16.6026 17.8471C13.54 18.1133 10.46 18.1133 7.39743 17.8471L5.8872 17.7158C5.13287 17.6502 4.52178 17.0762 4.40918 16.3274C4.07009 14.0725 3.99753 11.7877 4.1915 9.51992L9.20752 12.3066C10.9442 13.2714 13.0558 13.2714 14.7924 12.3066L19.8085 9.51989Z" fill="black"></path>
                    </svg>
                    Inbox
                  </span>
                </Dropdown.Item>
                <Dropdown.Divider />
                <Dropdown.Item eventKey="4" onClick={handleLogout}>
                  <span className='dropdown-item-content'>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M10 8.08223C10 7.89948 9.81059 7.7796 9.65181 7.87007C8.21726 8.68749 7.25 10.2308 7.25 12C7.25 14.6234 9.37665 16.75 12 16.75C14.6234 16.75 16.75 14.6234 16.75 12C16.75 10.2308 15.7827 8.68749 14.3482 7.87007C14.1894 7.7796 14 7.89948 14 8.08223V9.31619C14 9.39312 14.0358 9.46532 14.0946 9.51493C14.8012 10.1111 15.25 11.0031 15.25 12C15.25 13.7949 13.7949 15.25 12 15.25C10.2051 15.25 8.75 13.7949 8.75 12C8.75 11.0031 9.19881 10.1111 9.90539 9.51493C9.96419 9.46532 10 9.39312 10 9.31619V8.08223Z" fill="black"></path>
                      <path d="M12.75 7C12.75 6.58579 12.4142 6.25 12 6.25C11.5858 6.25 11.25 6.58579 11.25 7V12C11.25 12.4142 11.5858 12.75 12 12.75C12.4142 12.75 12.75 12.4142 12.75 12V7Z" fill="black"></path>
                      <path fillRule="evenodd" clipRule="evenodd" d="M3.25 12C3.25 7.16751 7.16751 3.25 12 3.25C16.8325 3.25 20.75 7.16751 20.75 12C20.75 16.8325 16.8325 20.75 12 20.75C7.16751 20.75 3.25 16.8325 3.25 12ZM12 4.75C7.99594 4.75 4.75 7.99594 4.75 12C4.75 16.0041 7.99594 19.25 12 19.25C16.0041 19.25 19.25 16.0041 19.25 12C19.25 7.99594 16.0041 4.75 12 4.75Z" fill="black"></path>
                    </svg>
                    Log Out
                  </span>
                </Dropdown.Item>
              </Dropdown.Menu>
            </Dropdown>
          </li>
        </ul>
      </div>
    </div>
  )
}

export default Header